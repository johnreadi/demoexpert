version: '3.8'

services:
  app:
    # Build the image from the Dockerfile in the current directory
    build: .
    container_name: demolition-expert
    ports:
      # Map port 80 (standard HTTP) from the host to port 3001 inside the container.
      # Dokploy will manage the external port mapping.
      - "80:3001"
    environment:
      # The server will listen on the port defined here inside the container
      - PORT=3001
      # IMPORTANT: Define your Gemini API_KEY in the Dokploy dashboard.
      # Dokploy will inject the value you set into this environment variable.
      - API_KEY=${API_KEY}
    restart: unless-stopped
